{% set name = "helm-docs" %}
{% set version = "1.14.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  - url: https://github.com/norwoodj/{{ name }}/archive/refs/tags/{{ version }}.tar.gz
    sha256: 65386a0c6401486d135a7c436b28fd1e9b8d0232bc2c702f8c7406a1139aa54a
    folder: src

build:
  number: 0
  script:
    - cd src
    - go install -v -ldflags "-X main.version={{ version }}" ./cmd/helm-docs
    - go-licenses save ./cmd/helm-docs --save_path ../library_licenses

requirements:
  build:
    - {{ compiler('go-nocgo') }}
    - go-licenses

test:
  commands:
    - helm-docs --version
    - helm-docs --help

about:
  home: https://github.com/norwoodj/helm-docs
  license: GPL-3.0-only
  license_file:
    - src/LICENSE
    - library_licenses/
  summary: A tool for automatically generating markdown documentation for helm charts

extra:
  recipe-maintainers:
    - "0xbe7a"
